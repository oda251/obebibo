<div class="max-w-2xl mx-auto">
  <div class="bg-white rounded-lg shadow-md p-8">
    <h1 class="text-2xl font-bold mb-6">応募内容確認</h1>
    
    <div class="mb-8">
      <h2 class="text-lg font-bold mb-4">案件情報</h2>
      <div class="bg-gray-50 p-4 rounded">
        <h3 class="font-bold mb-2"><%= @campaign.title %></h3>
        <p class="text-gray-600 mb-2"><%= truncate(@campaign.description, length: 200) %></p>
        <p class="text-sm text-gray-500">提供: <%= @campaign.company.name %></p>
      </div>
    </div>

    <div class="mb-8">
      <h2 class="text-lg font-bold mb-4">応募者情報</h2>
      <div class="bg-gray-50 p-4 rounded">
        <p><strong>メールアドレス:</strong> <%= current_user.email %></p>
        <p><strong>メールアドレス:</strong> <%= current_user.email %></p>
        <% if current_user.default_address %>
          <p><strong>お届け先:</strong> <%= current_user.default_address.full_address %></p>
        <% else %>
          <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded">
            <p class="text-yellow-800">お届け先住所が登録されていません。</p>
            <%= link_to "住所を登録する", "#", class: "text-blue-600 hover:underline" %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="mb-8">
      <h2 class="text-lg font-bold mb-4">応募条件</h2>
      <div class="bg-gray-50 p-4 rounded">
        <ul class="list-disc list-inside space-y-2 text-sm text-gray-700">
          <li>商品到着後、7日以内にレビューを投稿してください</li>
          <li>商品は無料でお試しいただけます</li>
          <li>当選の場合、登録住所に商品をお送りします</li>
          <li>応募は1人1回までです</li>
        </ul>
      </div>
    </div>

    <div class="border-t pt-6">
      <div class="flex items-center mb-4">
        <input type="checkbox" id="agreement" class="mr-2" required>
        <label for="agreement" class="text-sm text-gray-700">
          上記の応募条件に同意します
        </label>
      </div>
      
      <%= form_with url: entry_campaign_path(@campaign), method: :post, local: true do |form| %>
        <div class="flex space-x-4">
          <%= form.submit "応募する", class: "btn btn-primary", data: { confirm: "この案件に応募しますか？" } %>
          <%= link_to "戻る", campaign_path(@campaign), class: "btn btn-secondary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const checkbox = document.getElementById('agreement');
  const submitBtn = document.querySelector('input[type="submit"]');
  
  function updateSubmitButton() {
    submitBtn.disabled = !checkbox.checked;
    submitBtn.className = checkbox.checked ? 'btn btn-primary' : 'btn btn-primary opacity-50 cursor-not-allowed';
  }
  
  checkbox.addEventListener('change', updateSubmitButton);
  updateSubmitButton(); // Initial state
});
</script>